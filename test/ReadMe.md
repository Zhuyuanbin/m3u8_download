# 海兔影院 解析

### 搜索电游接口

https://www.haituw.com/search/%E8%AF%AF%E6%9D%802



第一次请求返回cookie

Set-Cookie: localVisitsCheck=%7B%22time%22%3A%221712727582%22%7D; expires=Fri, 10-May-2024 05:39:42 GMT; Max-Age=2592000; path=/
Set-Cookie: PHPSESSID=8eqpjcr4samna3uq7bihcne795; path=/



发起请求设置cookie

```
GET https://www.haituw.com/search/%E8%AF%AF%E6%9D%802 HTTP/1.1
Host: www.haituw.com
Cookie: localVisitsCheck=%7B%22time%22%3A%221712728082%22%7D; expires=Fri, 10-May-2024 05:48:02 GMT; Max-Age=2592000;PHPSESSID=8eqpjcr4samna3uq7bihcne795; path=/
```





```html
              <ul class="search-list">
                        <li class="item mb15 card-wrap">
                <div class="row">
                    <div class="img col-sm-2" style="">
                                                <a href="/movie/201-208831.html" class="thumb" target="_blank"><img src="/template/default/static/img/seize_img.jpg" class="lazy-load-img" _src="https://www.movieidc.com/upload/resource/201_208831_thumb.jpg"></a>
                                            </div>
                    <div class="txt col-sm-10">
                        <h5 class="subject ellipsis-one">
                                                        <a href="/movie/201-208831.html" target="_blank"><b><b style="color:red;">误杀2</b> <i class="fa fa-flag"></i></b></a>
                                                    </h5>
                        <p class="ellipsis-one year">年份：2021 </p>
                        <p class="area">地区：中国大陆 </p>
                        <p class="tags">类型：悬疑片</p>
                        <p class="ellipsis-one">导演：戴墨</p>
                        <p class="ellipsis-one">主演：肖央,任达华,文咏珊,陈雨锶,宋洋,李治廷,张世,尹子维,姜皓文,陈昊,周楚濋,王昊泽,强巴才丹</p>
                        <p>资源：HD国语版</p>
                        <p class="last">8个月前/3°C</em></p>
                    </div>
                </div>
            </li>
                        <li class="item mb15 card-wrap">
                <div class="row">
                    <div class="img col-sm-2" style="">
                                                <a href="/movie/201-281002.html" class="thumb" target="_blank"><img src="/template/default/static/img/seize_img.jpg" class="lazy-load-img" _src="https://www.movieidc.com/upload/resource/201_281002_thumb.jpg"></a>
                                            </div>
                    <div class="txt col-sm-10">
                        <h5 class="subject ellipsis-one">
                                                        <a href="/movie/201-281002.html" target="_blank"><b><b style="color:red;">误杀2</b> <i class="fa fa-flag"></i></b></a>
                                                    </h5>
                        <p class="ellipsis-one year">年份：2022 </p>
                        <p class="area">地区：中国大陆 </p>
                        <p class="tags">类型：犯罪片</p>
                        <p class="ellipsis-one">导演：不详</p>
                        <p class="ellipsis-one">主演：肖央,谭卓,陈冲,姜皓文</p>
                        <p>资源：正片</p>
                        <p class="last">2023-03-23 22:04:39/0°C</em></p>
                    </div>
                </div>
            </li>
                        <li class="item mb15 card-wrap">
                <div class="row">
                    <div class="img col-sm-2" style="">
                                                <a href="/movie/201-236745.html" class="thumb" target="_blank"><img src="/template/default/static/img/seize_img.jpg" class="lazy-load-img" _src="https://www.movieidc.com/upload/resource/201_236745_thumb.jpg"></a>
                                            </div>
                    <div class="txt col-sm-10">
                        <h5 class="subject ellipsis-one">
                                                        <a href="/movie/201-236745.html" target="_blank"><b><b style="color:red;">误杀2</b>优酷独家幕后记录 <i class="fa fa-flag"></i></b></a>
                                                    </h5>
                        <p class="ellipsis-one year">年份：2021 </p>
                        <p class="area">地区：中国大陆 </p>
                        <p class="tags">类型：纪录片</p>
                        <p class="ellipsis-one">导演：戴墨</p>
                        <p class="ellipsis-one">主演：肖央,任达华,文咏珊,陈雨锶,宋洋,李治廷,张世,尹子维,姜皓文,陈昊,周楚濋,王昊泽,强巴才丹</p>
                        <p>资源：正片</p>
                        <p class="last">2023-03-21 01:58:01/0°C</em></p>
                    </div>
                </div>
            </li>
                        <li class="item mb15 card-wrap">
                <div class="row">
                    <div class="img col-sm-2" style="">
                                                <a href="/movie/201-285902.html" class="thumb" target="_blank"><img src="/template/default/static/img/seize_img.jpg" class="lazy-load-img" _src="https://www.movieidc.com/upload/resource/201_285902_thumb.jpg"></a>
                                            </div>
                    <div class="txt col-sm-10">
                        <h5 class="subject ellipsis-one">
                                                        <a href="/movie/201-285902.html" target="_blank"><b><b style="color:red;">误杀2</b> 独家幕后记录 <i class="fa fa-flag"></i></b></a>
                                                    </h5>
                        <p class="ellipsis-one year">年份：2021 </p>
                        <p class="area">地区：中国大陆 </p>
                        <p class="tags">类型：纪录片</p>
                        <p class="ellipsis-one">导演：戴墨</p>
                        <p class="ellipsis-one">主演：肖央,任达华,文咏珊,陈雨锶,宋洋,李治廷,张世,尹子维,姜皓文,陈昊,周楚濋,王昊泽,强巴才丹</p>
                        <p>资源：正片</p>
                        <p class="last">2022-12-24 11:42:12/0°C</em></p>
                    </div>
                </div>
            </li>
                    </ul>

```



匹配                                                        <a href="/movie/201-208831.html" target="_blank"><b><b style="color:red;">误杀2</b> <i class="fa fa-flag"></i></b></a> 

名字相等，拼接  域名+  href="/movie/201-208831.html"

https://www.haituw.com/movie/201-208831.html&play=0-0





https://www.haituw.com/common/api_getNewHost.php



请求

```
POST /common/api_getNewHost.php HTTP/1.1
Accept: */*
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: zh-CN,zh;q=0.9
Connection: keep-alive
Content-Length: 104
Content-Type: application/x-www-form-urlencoded
Cookie: PHPSESSID=fhobnlbd3hjinpvrn1f4pg0v11; Hm_lvt_f551ad7029b7c29f40e31b8f9e9c21fc=1712644487; rocketchatscreenshare=chrome; localVisitsCheck=%7B%22time%22%3A%221712647243%22%7D; Hm_lpvt_f551ad7029b7c29f40e31b8f9e9c21fc=1712647287
DNT: 1
Host: www.haituw.com
Origin: https://www.haituw.com
Referer: https://www.haituw.com/movie/201-208831.html&play=1-0
Sec-Fetch-Dest: empty
Sec-Fetch-Mode: cors
Sec-Fetch-Site: same-origin
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36
sec-ch-ua: "Google Chrome";v="123", "Not:A-Brand";v="8", "Chromium";v="123"
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: "Windows"
```





响应

```
{
    "host": "",
    "ip": "14.136.89.213",
    "ips": [],
    "uid": "",
    "nickname": "",
    "avatar": "",
    "issuperpower": "",
    "str": "",
    "data": {
        "refabulous": "",
        "replys": "",
        "fabulous": "",
        "collect": "",
        "visits": 3,
        "updatetime": "8\u4e2a\u6708\u524d",
        "url": "https:\/\/vip.ffzy-online.com\/share\/ae0eb3eed39d2bcef4622b2499a05fe6",
        "oldstatictime": "",
        "newstatictime": "",
        "type": "1",
        "resource": "",
        "ispass": "1",
        "createdate": "2022-11-14 14:06:37",
        "visitsnum": 337,
        "hotnum": 422
    },
    "isCreateStatic": "",
    "isvip": ""
}
```





https://vip.ffzy-online.com/share/ae0eb3eed39d2bcef4622b2499a05fe6

```
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <title>误杀2.HD国语版</title>
</head>
<link rel="stylesheet" type="text/css" href="/css/share.css">

<body onload="init()">

        <div class="gaog" id="gaog">
            <!--广告添加区域-->
            <div class="gaog-var">

            </div>
        </div>

        <div id="a1"></div>

        <div style="display:none" name="playtime" value="7131"></div>
        <div style="display:none" name="sizeview" value="1107681941"></div>
        <script type="text/javascript" src="/js/jquery-1.11.2.min.js" charset="utf-8"></script>
        <script type="text/javascript" src="/ckplayerx/ckplayer.js" charset="utf-8"></script>
                <link rel="stylesheet" href="/DPlayer/DPlayer.min.css">
<!--
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/dplayer@latest"></script>
-->
        <script src="/DPlayer/DPlayer.min.js"></script>
				<script src="/hls.min.js"></script>
		        <script src="/artplayer.js"></script>
        <script type="text/javascript">
            var video_player= 'artplayer'
            var tracker_url = ''
            var signaler_url = ''
            var auto_play = ''
            var hosts = '';
            var redirecturl = "http://vip.okzybo.com";
            var videoid = "ae0eb3eed39d2bcef4622b2499a05fe6";

            var id = 'ae0eb3eed39d2bcef4622b2499a05fe6'
            var     l = ''
            var     r= ''
            var     t= '15'
            var     d= ''
            var     u= ''

            var main = "/20221015/708_9b604134/index.m3u8?sign=a67617bfcc1414b3a6a557994cd6079b";
            var xml = "/20221015/708_9b604134/index.xml?sign=a67617bfcc1414b3a6a557994cd6079b";
            var pic = "/20221015/708_9b604134/1.jpg";
            var thumbnails = "/20221015/708_9b604134/thumbnails.jpg";
        </script>
        <script type="text/javascript" src="/js/share.js" charset="utf-8"></script>
        <script type="text/javascript">

        </script>

    <!--/广告添加区域-->
</body>

</html>
```



拼接 https://vip.ffzy-online.com + var main = "/20221015/708_9b604134/index.m3u8?sign=a67617bfcc1414b3a6a557994cd6079b";



https://vip.ffzy-online.com/20221015/708_9b604134/index.m3u8?sign=a67617bfcc1414b3a6a557994cd6079b

```
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=800000,RESOLUTION=1080x608
5000k/hls/mixed.m3u8
```



https://vip.ffzy-online.com/20221015/708_9b604134/  + 5000k/hls/mixed.m3u8

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-PLAYLIST-TYPE:VOD
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-TARGETDURATION:9
#EXT-X-DISCONTINUITY
#EXTINF:4.166667,
6f1fc57e924000000.ts
#EXTINF:5.000000,
6f1fc57e924000001.ts
#EXTINF:4.958333,
6f1fc57e924000002.ts
#EXTINF:4.166667,
6f1fc57e924000003.ts
#EXTINF:2.958333,
6f1fc57e924000004.ts
#EXTINF:4.166667,
6f1fc57e924000005.ts
```



https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000000.ts

解析文件url

```
https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000000.ts

https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000001.ts

https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000002.ts

https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000003.ts

https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000004.ts

https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000005.ts

https://vip.ffzy-online.com/20221015/708_9b604134/5000k/hls/6f1fc57e924000006.ts

```











https://vip.ffzy-play.com/20221218/37532_a7d57d68/2000k/hls/index.m3u8